<IfDefine Linux>
    LoadModule mpm_event_module ${ModulesDir}/mod_mpm_event.so
    TypesConfig /etc/mime.types
</IfDefine>
<IfDefine Windows>
    TypesConfig ${ServerRoot}/conf/mime.types
</IfDefine>
<IfModule !log_config_module>
    LoadModule log_config_module ${ModulesDir}/mod_log_config.so
</IfModule>
LoadModule mime_module ${ModulesDir}/mod_mime.so
LoadModule alias_module ${ModulesDir}/mod_alias.so
LoadModule headers_module ${ModulesDir}/mod_headers.so
LoadModule authn_core_module ${ModulesDir}/mod_authn_core.so
LoadModule authz_core_module ${ModulesDir}/mod_authz_core.so
LoadModule authz_user_module ${ModulesDir}/mod_authz_user.so

LoadModule auth_openidc_module ${ModAuthOpenIDC}/mod_auth_openidc.so

PidFile ${InstanceRoot}/logs/httpd.pid
ErrorLog ${ErrorLog}
TransferLog ${InstanceRoot}/logs/access.log

Listen 5001
DocumentRoot ${InstanceRoot}/wwwroot

OIDCOAuthIntrospectionEndpoint https://login.example.ubidemo.com/uas/oauth2/introspection

OIDCOAuthClientID api
OIDCOAuthClientSecret secret

Header always set Access-Control-Allow-Origin "*"
Header always set Access-Control-Allow-Headers "Authorization"
Header always set Access-Control-Expose-Headers "WWW-Authenticate"

<Location "/">

    AuthType oauth20
    <RequireAny>
        Require valid-user
        Require method OPTIONS
    </RequireAny>

</Location>

Alias /simple ${InstanceRoot}/hello.json
    
